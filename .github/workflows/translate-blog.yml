name: Translate blog to ru (test on index)

on:
  push:
    branches: [ main ]
    paths:
      - "index.html"
  workflow_dispatch: {}

jobs:
  translate-and-sync:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout English source repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 1

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Install dependencies
        run: |
          pip install requests

      - name: Translate index.html to Russian and push
        env:
          # GitHub PAT с доступом к devlab-blog* репозиториям
          GH_BOT_TOKEN: ${{ secrets.GH_BOT_TOKEN }}

          # Ключ DeepSeek, который ты создала
          DEEPSEEK_API_KEY: ${{ secrets.DEEPSEEK_API_KEY }}

          # Пока тестируем только русский репозиторий
          REPO_RU: "MiaGorceva/devlab-blog.ru"
        run: |
          python .github/scripts/translate_and_push.py
